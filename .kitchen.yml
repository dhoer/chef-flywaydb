---
driver:
  name: vagrant

provisioner:
  name: chef_solo
  require_chef_omnibus: 11

platforms:
  - name: centos-6.7
  - name: centos-7.1
  - name: ubuntu-14.04

suites:
  - name: default
    run_list:
      - recipe[flywaydb_test::migrate]
    attributes:
      flywaydb_test:
        params:
          password: mysql
          placeholders.test_password: test
        flyway_conf:
          user: notset
          url: jdbc:mysql://notset/mysql
          schemas: flywaydb_test
          locations: filesystem:/tmp/db
          cleanDisabled: true
          placeholders.test_user: test
        alt_conf:
          user: root
          url: jdbc:mysql://localhost/mysql
        sensitive: false
  - name: conf_file
    run_list:
      - recipe[flywaydb_test::migrate]
    attributes:
      flywaydb_test:
        params:
          user: root
          password: mysql
          placeholders.test_password: test
        flyway_conf: /tmp/conf/ext.conf
        sensitive: false
  - name: 3.2.1
    run_list:
      - recipe[flywaydb_test::migrate]
    attributes:
      flywaydb:
        url: https://bintray.com/artifact/download/business/maven/flyway-commandline-3.2.1-linux-x64.tar.gz
        sha256: 8b9ba320a69b8cdef6de60118e312d3cbe96ca37a24b8aec7be4cdf4950bb5fe
      flywaydb_test:
        params:
          user: root
          password: mysql
          placeholders.test_password: test
        alt_conf: /tmp/conf/ext.conf
